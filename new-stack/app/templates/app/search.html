{% extends "app/layout.html" %}


{% block content %}

{% if message %}
    <h1> {{message}} </h1>
{% else %}
<h1> Search results for {{query}}</h1>
{% endif %}

<div class="grid">
    {% for article in Articles %}
        <div id="card{{article.id}}" class="card" style="position:relative;">
            <img id="myImg{{article.id}}" class="urlImage" src={{article.urlImage}} />
            <h4 id="title{{article.id}}"> {{article.title}}</h4>
            <p>{{article.description}}</p>
            <div class="overlay">
                <button type="button"> save </button>
                <button type="button"> share </button>
            </div>
        </div>

        <div id={{article.id}} class="modal">
                <div class="wrapper">
                    <button type="button" class="btn btn-info" id="closeButton" onclick="modal.style.display='none';">x</button>
                    <img class="img-content" id="img{{article.id}}">
                    <div class="article-content">
                        <h5 id="modalTitle{{article.id}}" class="title-content"></h5>
                        <div class="sentiment">
                            <h4 id="sentimentNeg{{article.id}}" style="color:red;font-family:'Times New Roman', Times, serif"> </h4>
                            <h4 id="sentimentNeu{{article.id}}" style="color:gray;font-family:'Times New Roman', Times, serif"> </h4>
                            <h4 id="sentimentPos{{article.id}}" style="color:green;font-family:'Times New Roman', Times, serif"> </h4>
                        </div>
                    </div>
                    <div class="paragraph-content">
                        <h4 style="margin:75px;text-align: justify;font-family:'Times New Roman', Times, serif" ; id="text{{article.id}}"></h4>
                    </div>
                    <div>
                        <ul class="source">
                            <li>
                                <h5 id="reference{{article.id}}"></h5>
                            </li>
                            <li>
                                <div>
                                    <a id="url{{article.id}}" target="_blank" text-decoration: " none" href="">Source</a>
                                </div>
                            </li>
                            <li>
                                <h5 id="published{{article.id}}"></h5>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        <script>
            var modal = document.getElementById('{{article.id}}');
            var modalImg = document.getElementById('img{{article.id}}');
            var img = document.getElementById('myImg{{article.id}}');
            img.style.cursor = "pointer";
            var caption = document.getElementById('text{{article.id}}');
            var author = document.getElementById('reference{{article.id}}');
            var title = document.getElementById('modalTitle{{article.id}}');
            var url = document.getElementById('url{{article.id}}');
            var published = document.getElementById('published{{article.id}}');
            var sentimentNeg = document.getElementById('sentimentNeg{{article.id}}');
            var sentimentNeu = document.getElementById('sentimentNeu{{article.id}}');
            var sentimentPos = document.getElementById('sentimentPos{{article.id}}');

            img.onclick = function () {
                modal.style.display = "block";
                modalImg.src = '{{article.urlImage}}';
                title.innerHTML = '{{article.title}}';
                caption.innerHTML = '{{article.text}}';
                author.innerHTML = 'Author:' + ' {{article.author}}';
                url.setAttribute("href", '{{article.url}}');
                url.innerHTML = '{{article.source}}';
                published.innerHTML = 'Published On:' + ' {{article.publishedOn}}';
                sentimentNeg.innerHTML = 'Negative: ' + '{{article.sentimentNeg}}';
                sentimentNeu.innerHTML = 'Neutral: ' + '{{article.sentimentNeu}}';
                sentimentPos.innerHTML = 'Positive: ' + '{{article.sentimentPos}}';


            }

            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        </script> 


    {% endfor %}
</div>

    





{% endblock %}